{"version":3,"sources":["../src/index.ts","../src/extractors/SoundCloudExtractor.ts","../src/extractors/YoutubeExtractor.ts","../src/extractors/common/helper.ts","../src/extractors/LyricsExtractor.ts","../src/extractors/VimeoExtractor.ts","../src/internal/Vimeo.ts","../src/extractors/ReverbnationExtractor.ts","../src/extractors/AttachmentExtractor.ts","../src/internal/downloader.ts","../src/extractors/AppleMusicExtractor.ts","../src/internal/index.ts","../src/internal/AppleMusic.ts","../src/internal/Spotify.ts","../src/extractors/SpotifyExtractor.ts"],"sourcesContent":["export * from './extractors';\nexport * as Internal from './internal';\n\n// eslint-disable-next-line @typescript-eslint/no-inferrable-types\nexport const version: string = '4.1.2';\n","// prettier-ignore\nimport {\n    BaseExtractor,\n    ExtractorInfo,\n    ExtractorSearchContext,\n    Playlist,\n    QueryType,\n    SearchQueryType,\n    Track,\n    Util\n} from 'discord-player';\nimport { Client, Song } from 'soundcloud-scraper';\n\nconst soundcloud = new Client(undefined, {\n    fetchAPIKey: true\n});\n\nexport class SoundCloudExtractor extends BaseExtractor {\n    public static identifier = 'com.discord-player.soundcloudextractor' as const;\n\n    public async validate(query: string, type?: SearchQueryType | null | undefined): Promise<boolean> {\n        if (typeof query !== 'string') return false;\n        // prettier-ignore\n        return ([\n            QueryType.SOUNDCLOUD,\n            QueryType.SOUNDCLOUD_PLAYLIST,\n            QueryType.SOUNDCLOUD_SEARCH,\n            QueryType.SOUNDCLOUD_TRACK,\n            QueryType.AUTO,\n            QueryType.AUTO_SEARCH\n        ] as SearchQueryType[]).some((r) => r === type);\n    }\n\n    public async getRelatedTracks(track: Track) {\n        if (track.queryType === QueryType.SOUNDCLOUD_TRACK)\n            return this.handle(track.author || track.title, {\n                requestedBy: track.requestedBy,\n                type: QueryType.SOUNDCLOUD_SEARCH\n            });\n\n        return this.createResponse();\n    }\n\n    public async handle(query: string, context: ExtractorSearchContext): Promise<ExtractorInfo> {\n        switch (context.type) {\n            case QueryType.SOUNDCLOUD_TRACK: {\n                const trackInfo = await soundcloud\n                    .getSongInfo(query, {\n                        fetchComments: false,\n                        fetchEmbed: false,\n                        fetchStreamURL: true\n                    })\n                    .catch(Util.noop);\n\n                if (!trackInfo) return this.emptyResponse();\n\n                const track = new Track(this.context.player, {\n                    title: trackInfo.title,\n                    url: trackInfo.url,\n                    duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration)),\n                    description: trackInfo.description,\n                    thumbnail: trackInfo.thumbnail,\n                    views: trackInfo.playCount,\n                    author: trackInfo.author.name,\n                    requestedBy: context.requestedBy,\n                    source: 'soundcloud',\n                    engine: trackInfo,\n                    queryType: context.type\n                });\n\n                track.extractor = this;\n\n                return { playlist: null, tracks: [track] };\n            }\n            case QueryType.SOUNDCLOUD_PLAYLIST: {\n                const data = await soundcloud\n                    .getPlaylist(query, {\n                        fetchEmbed: false\n                    })\n                    .catch(Util.noop);\n                if (!data) return { playlist: null, tracks: [] };\n\n                const res = new Playlist(this.context.player, {\n                    title: data.title,\n                    description: data.description ?? '',\n                    thumbnail: data.thumbnail ?? 'https://soundcloud.com/pwa-icon-192.png',\n                    type: 'playlist',\n                    source: 'soundcloud',\n                    author: {\n                        name: data.author?.name ?? data.author?.username ?? 'Unknown Artist',\n                        url: data.author?.profile\n                    },\n                    tracks: [],\n                    id: `${data.id}`,\n                    url: data.url,\n                    rawPlaylist: data\n                });\n\n                for (const song of data.tracks) {\n                    const track = new Track(this.context.player, {\n                        title: song.title,\n                        description: song.description ?? '',\n                        author: song.author?.username ?? song.author?.name ?? 'Unknown Artist',\n                        url: song.url,\n                        thumbnail: song.thumbnail,\n                        duration: Util.buildTimeCode(Util.parseMS(song.duration)),\n                        views: song.playCount ?? 0,\n                        requestedBy: context.requestedBy,\n                        playlist: res,\n                        source: 'soundcloud',\n                        engine: song,\n                        queryType: context.type\n                    });\n                    track.extractor = this;\n                    res.tracks.push(track);\n                }\n\n                return { playlist: res, tracks: res.tracks };\n            }\n            default: {\n                const tracks = await soundcloud.search(query, 'track').catch(Util.noop);\n                if (!tracks || !tracks.length) return this.emptyResponse();\n\n                const resolvedTracks: Track[] = [];\n\n                for (const searchedTrack of tracks) {\n                    const trackInfo = await soundcloud\n                        .getSongInfo(searchedTrack.url, {\n                            fetchStreamURL: true,\n                            fetchComments: false,\n                            fetchEmbed: false\n                        })\n                        .catch(Util.noop);\n                    if (!trackInfo) continue;\n\n                    const track = new Track(this.context.player, {\n                        title: trackInfo.title,\n                        url: trackInfo.url,\n                        duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration)),\n                        description: trackInfo.description,\n                        thumbnail: trackInfo.thumbnail,\n                        views: trackInfo.playCount,\n                        author: trackInfo.author.name,\n                        requestedBy: context.requestedBy,\n                        source: 'soundcloud',\n                        engine: trackInfo,\n                        queryType: 'soundcloudTrack'\n                    });\n\n                    track.extractor = this;\n\n                    resolvedTracks.push(track);\n                }\n\n                return { playlist: null, tracks: resolvedTracks };\n            }\n        }\n    }\n\n    public emptyResponse(): ExtractorInfo {\n        return { playlist: null, tracks: [] };\n    }\n\n    public async stream(info: Track) {\n        const engine = info.raw.engine as Song;\n        if (engine && engine.streamURL) {\n            return engine.streamURL;\n        }\n\n        const url = await soundcloud.fetchStreamURL(info.url).catch(Util.noop);\n        if (!url) throw new Error('Could not extract stream from this source');\n\n        if (engine) {\n            engine.streamURL = url;\n        } else {\n            info.raw.engine = {\n                streamURL: url\n            };\n        }\n\n        return url;\n    }\n}\n","import { Video, YouTube } from 'youtube-sr';\n\n// prettier-ignore\nimport {\n    BaseExtractor,\n    ExtractorInfo,\n    ExtractorSearchContext,\n    Playlist,\n    QueryType,\n    SearchQueryType,\n    Track,\n    Util\n} from 'discord-player';\n\nimport { StreamFN, YouTubeLibs, loadYtdl, makeYTSearch } from './common/helper';\n\n// taken from ytdl-core\nconst validQueryDomains = new Set(['youtube.com', 'www.youtube.com', 'm.youtube.com', 'music.youtube.com', 'gaming.youtube.com']);\nconst validPathDomains = /^https?:\\/\\/(youtu\\.be\\/|(www\\.)?youtube\\.com\\/(embed|v|shorts)\\/)/;\nconst idRegex = /^[a-zA-Z0-9-_]{11}$/;\n\nexport class YoutubeExtractor extends BaseExtractor {\n    public static identifier = 'com.discord-player.youtubeextractor' as const;\n    private _stream!: StreamFN;\n    public _ytLibName!: string;\n\n    public async activate() {\n        const { stream, name } = await loadYtdl(this.context.player.options.ytdlOptions);\n        this._stream = stream;\n        this._ytLibName = name;\n    }\n\n    public async validate(query: string, type?: SearchQueryType | null | undefined): Promise<boolean> {\n        if (typeof query !== 'string') return false;\n        // prettier-ignore\n        return ([\n            QueryType.YOUTUBE,\n            QueryType.YOUTUBE_PLAYLIST,\n            QueryType.YOUTUBE_SEARCH,\n            QueryType.YOUTUBE_VIDEO,\n            QueryType.AUTO,\n            QueryType.AUTO_SEARCH\n        ] as SearchQueryType[]).some((r) => r === type);\n    }\n\n    public async handle(query: string, context: ExtractorSearchContext): Promise<ExtractorInfo> {\n        query = query.includes('youtube.com') ? query.replace(/(m(usic)?|gaming)\\./, '') : query;\n        if (YoutubeExtractor.validateURL(query)) context.type = QueryType.YOUTUBE_VIDEO;\n\n        switch (context.type) {\n            case QueryType.YOUTUBE_PLAYLIST: {\n                const ytpl = await YouTube.getPlaylist(query, {\n                    fetchAll: true,\n                    requestOptions: context.requestOptions as unknown as RequestInit\n                }).catch(Util.noop);\n                if (!ytpl) return this.emptyResponse();\n\n                const playlist = new Playlist(this.context.player, {\n                    title: ytpl.title!,\n                    thumbnail: ytpl.thumbnail as unknown as string,\n                    description: ytpl.title || '',\n                    type: 'playlist',\n                    source: 'youtube',\n                    author: {\n                        name: ytpl.channel!.name as string,\n                        url: ytpl.channel!.url as string\n                    },\n                    tracks: [],\n                    id: ytpl.id as string,\n                    url: ytpl.url as string,\n                    rawPlaylist: ytpl\n                });\n\n                playlist.tracks = ytpl.videos.map((video) => {\n                    const track = new Track(this.context.player, {\n                        title: video.title as string,\n                        description: video.description as string,\n                        author: video.channel?.name as string,\n                        url: video.url,\n                        requestedBy: context.requestedBy,\n                        thumbnail: video.thumbnail!.url as string,\n                        views: video.views,\n                        duration: video.durationFormatted,\n                        raw: video,\n                        playlist: playlist,\n                        source: 'youtube',\n                        queryType: 'youtubeVideo'\n                    });\n\n                    track.extractor = this;\n                    return track;\n                });\n\n                return { playlist, tracks: playlist.tracks };\n            }\n            case QueryType.YOUTUBE_VIDEO: {\n                const id = /[a-zA-Z0-9-_]{11}/.exec(query);\n                if (!id?.[0]) return this.emptyResponse();\n                const video = await YouTube.getVideo(`https://www.youtube.com/watch?v=${id}`, context.requestOptions as unknown as RequestInit).catch(Util.noop);\n                if (!video) return this.emptyResponse();\n\n                // @ts-expect-error\n                video.source = 'youtube';\n\n                const track = new Track(this.context.player, {\n                    title: video.title!,\n                    description: video.description!,\n                    author: video.channel?.name as string,\n                    url: video.url,\n                    requestedBy: context.requestedBy,\n                    thumbnail: video.thumbnail?.displayThumbnailURL('maxresdefault') as string,\n                    views: video.views,\n                    duration: video.durationFormatted,\n                    source: 'youtube',\n                    raw: video,\n                    queryType: context.type\n                });\n\n                track.extractor = this;\n\n                return {\n                    playlist: null,\n                    tracks: [track]\n                };\n            }\n            default: {\n                const tracks = await this._makeYTSearch(query, context);\n                return { playlist: null, tracks };\n            }\n        }\n    }\n\n    private async _makeYTSearch(query: string, context: ExtractorSearchContext) {\n        const res = await makeYTSearch(query, context.requestOptions).catch(Util.noop);\n        if (!res || !res.length) return [];\n\n        return res.map((video) => {\n            // @ts-expect-error\n            video.source = 'youtube';\n\n            const track = new Track(this.context.player, {\n                title: video.title!,\n                description: video.description!,\n                author: video.channel?.name as string,\n                url: video.url,\n                requestedBy: context.requestedBy,\n                thumbnail: video.thumbnail?.displayThumbnailURL('maxresdefault') as string,\n                views: video.views,\n                duration: video.durationFormatted,\n                source: 'youtube',\n                raw: video,\n                queryType: context.type!\n            });\n\n            track.extractor = this;\n\n            return track;\n        });\n    }\n\n    public async getRelatedTracks(track: Track) {\n        let info: Video[] | void;\n\n        if (YoutubeExtractor.validateURL(track.url))\n            info = await YouTube.getVideo(track.url)\n                .then((x) => x.videos)\n                .catch(Util.noop);\n\n        // fallback\n        if (!info)\n            info = await YouTube.search(track.author || track.title, { limit: 5, type: 'video' })\n                .then((x) => x)\n                .catch(Util.noop);\n\n        if (!info?.length) {\n            return this.createResponse();\n        }\n\n        const similar = info.map((video) => {\n            const t = new Track(this.context.player, {\n                title: video.title!,\n                url: `https://www.youtube.com/watch?v=${video.id}`,\n                duration: video.durationFormatted || Util.buildTimeCode(Util.parseMS(video.duration * 1000)),\n                description: video.title!,\n                thumbnail: typeof video.thumbnail === 'string' ? video.thumbnail! : video.thumbnail!.url!,\n                views: video.views,\n                author: video.channel!.name!,\n                requestedBy: track.requestedBy,\n                source: 'youtube',\n                queryType: 'youtubeVideo'\n            });\n\n            t.extractor = this;\n\n            return t;\n        });\n\n        return this.createResponse(null, similar);\n    }\n\n    public emptyResponse(): ExtractorInfo {\n        return { playlist: null, tracks: [] };\n    }\n\n    public async stream(info: Track) {\n        if (!this._stream) {\n            throw new Error(`Could not find youtube streaming library. Install one of ${YouTubeLibs.join(', ')}`);\n        }\n\n        let url = info.url;\n\n        if (info.queryType === 'spotifySong' || info.queryType === 'appleMusicSong') {\n            if (YoutubeExtractor.validateURL(info.raw.url)) url = info.raw.url;\n            else {\n                const _url = await YouTube.searchOne(`${info.title} ${info.author}`, 'video')\n                    .then((r) => r.url)\n                    .catch(Util.noop);\n                if (!_url) throw new Error(`Could not extract stream for this track`);\n                info.raw.url = url = _url;\n            }\n        }\n\n        if (url) url = url.includes('youtube.com') ? url.replace(/(m(usic)?|gaming)\\./, '') : url;\n\n        return this._stream(url);\n    }\n\n    public static validateURL(link: string) {\n        try {\n            YoutubeExtractor.parseURL(link);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n\n    public static validateId(id: string) {\n        return idRegex.test(id.trim());\n    }\n\n    public static parseURL(link: string) {\n        const parsed = new URL(link.trim());\n        let id = parsed.searchParams.get('v');\n        if (validPathDomains.test(link.trim()) && !id) {\n            const paths = parsed.pathname.split('/');\n            id = parsed.host === 'youtu.be' ? paths[1] : paths[2];\n        } else if (parsed.hostname && !validQueryDomains.has(parsed.hostname)) {\n            throw Error('Not a YouTube domain');\n        }\n        if (!id) {\n            throw Error(`No video id found: \"${link}\"`);\n        }\n        id = id.substring(0, 11);\n        if (!exports.validateID(id)) {\n            throw TypeError(`Video id (${id}) does not match expected ` + `format (${idRegex.toString()})`);\n        }\n        return id;\n    }\n}\n\nexport { YoutubeExtractor as YouTubeExtractor };\n","import { YouTube } from 'youtube-sr';\n\nlet factory: {\n    name: string;\n    stream: StreamFN;\n    lib: string;\n};\n\nexport const createImport = (lib: string) => import(lib).catch(() => null);\nexport const UA = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.49';\n\nexport const YouTubeLibs = [\n    'ytdl-core',\n    'play-dl',\n    '@distube/ytdl-core'\n    // add more to the list if you have any\n];\n\n// forced lib\nconst forcedLib = process.env.DP_FORCE_YTDL_MOD;\nif (forcedLib) YouTubeLibs.unshift(forcedLib);\n\nexport const getFetch =\n    typeof fetch !== 'undefined'\n        ? fetch\n        : async (info: RequestInfo, init?: RequestInit): Promise<Response> => {\n              // eslint-disable-next-line\n              let dy: any;\n\n              /* eslint-disable no-cond-assign */\n              if ((dy = await createImport('undici'))) {\n                  return (dy.fetch || dy.default.fetch)(info, init);\n              } else if ((dy = await createImport('node-fetch'))) {\n                  return (dy.fetch || dy.default)(info, init);\n              } else {\n                  throw new Error('No fetch lib found');\n              }\n\n              /* eslint-enable no-cond-assign */\n          };\n\nexport type StreamFN = (q: string) => Promise<import('stream').Readable | string>;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport async function loadYtdl(options?: any, force = false) {\n    if (factory && !force) return factory;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let lib: any, _ytLibName: string, _stream: StreamFN;\n\n    for (const ytlib of YouTubeLibs) {\n        lib = await import(ytlib).then(\n            (m) => m,\n            () => null\n        );\n        if (!lib) continue;\n        lib = lib.default || lib;\n        _ytLibName = ytlib;\n        break;\n    }\n\n    if (lib) {\n        const isYtdl = ['ytdl-core', '@distube/ytdl-core'].some((lib) => lib === _ytLibName);\n\n        _stream = async (query) => {\n            if (isYtdl) {\n                const dl = lib as typeof import('ytdl-core');\n                const info = await dl.getInfo(query, options);\n\n                const formats = info.formats\n                    .filter((format) => {\n                        return info.videoDetails.isLiveContent ? format.isHLS && format.hasAudio : format.hasAudio;\n                    })\n                    .sort((a, b) => Number(b.audioBitrate) - Number(a.audioBitrate) || Number(a.bitrate) - Number(b.bitrate));\n\n                const fmt = formats.find((format) => !format.hasVideo) || formats.sort((a, b) => Number(a.bitrate) - Number(b.bitrate))[0];\n                return fmt.url;\n                // return dl(query, this.context.player.options.ytdlOptions);\n            } else {\n                const dl = lib as typeof import('play-dl');\n\n                const info = await dl.video_info(query);\n                const formats = info.format\n                    .filter((format) => {\n                        const re = /\\/manifest\\/hls_(variant|playlist)\\//;\n                        if (!format.url) return false;\n                        if (info.video_details.live) return re.test(format.url) && typeof format.bitrate === 'number';\n                        return typeof format.bitrate === 'number';\n                    })\n                    .sort((a, b) => Number(b.bitrate) - Number(a.bitrate));\n\n                const fmt = formats.find((format) => !format.qualityLabel) || formats.sort((a, b) => Number(a.bitrate) - Number(b.bitrate))[0];\n                return fmt.url!;\n                // return (await dl.stream(query, { discordPlayerCompatibility: true })).stream;\n            }\n        };\n    } else {\n        throw new Error(`Could not load youtube library. Install one of ${YouTubeLibs.map((lib) => `\"${lib}\"`).join(', ')}`);\n    }\n\n    factory = { name: _ytLibName!, stream: _stream, lib };\n    return factory;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport async function makeYTSearch(query: string, opt: any) {\n    const res = await YouTube.search(query, {\n        type: 'video',\n        requestOptions: opt\n    }).catch(() => {\n        //\n    });\n\n    return res || [];\n}\n","import { Client as GeniusClient } from 'genius-lyrics';\n\n// lazy load client\nlet client: GeniusClient;\n\nexport function lyricsExtractor(apiKey?: string, force?: boolean) {\n    if (!client && !force) client = new GeniusClient(apiKey);\n    return { search, client };\n}\n\nfunction search(query: string) {\n    return new Promise<LyricsData | null>((resolve, reject) => {\n        if (typeof query !== 'string') return reject(new TypeError(`Expected search query to be a string, received \"${typeof query}\"!`));\n\n        client.songs\n            .search(query)\n            .then(async (songs) => {\n                const data = {\n                    title: songs[0].title,\n                    id: songs[0].id,\n                    thumbnail: songs[0].thumbnail,\n                    image: songs[0].image,\n                    url: songs[0].url,\n                    artist: {\n                        name: songs[0].artist.name,\n                        id: songs[0].artist.id,\n                        url: songs[0].artist.url,\n                        image: songs[0].artist.image\n                    },\n                    lyrics: await songs[0].lyrics(false)\n                };\n\n                resolve(data);\n            })\n            .catch(() => {\n                reject(new Error('Could not parse lyrics'));\n            });\n    });\n}\n\nexport interface LyricsData {\n    title: string;\n    id: number;\n    thumbnail: string;\n    image: string;\n    url: string;\n    artist: {\n        name: string;\n        id: number;\n        url: string;\n        image: string;\n    };\n    lyrics: string;\n}\n","// prettier-ignore\nimport {\n    BaseExtractor,\n    ExtractorInfo,\n    ExtractorSearchContext,\n    QueryType,\n    SearchQueryType,\n    Track,\n    Util\n} from 'discord-player';\nimport { Vimeo } from '../internal/Vimeo';\n\nexport class VimeoExtractor extends BaseExtractor {\n    public static identifier = 'com.discord-player.vimeoextractor' as const;\n\n    public async validate(query: string, type?: SearchQueryType | null | undefined): Promise<boolean> {\n        if (typeof query !== 'string') return false;\n        return ([QueryType.VIMEO] as SearchQueryType[]).some((r) => r === type);\n    }\n\n    public async getRelatedTracks(track: Track) {\n        void track;\n        return this.createResponse();\n    }\n\n    public async handle(query: string, context: ExtractorSearchContext): Promise<ExtractorInfo> {\n        switch (context.type) {\n            case QueryType.VIMEO: {\n                const trackInfo = await Vimeo.getInfo(\n                    query\n                        .split('/')\n                        .filter((x) => !!x)\n                        .pop()!\n                ).catch(Util.noop);\n\n                if (!trackInfo) return this.emptyResponse();\n\n                const track = new Track(this.context.player, {\n                    title: trackInfo.title,\n                    url: trackInfo.url,\n                    duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration || 0)),\n                    description: `${trackInfo.title} by ${trackInfo.author.name}`,\n                    thumbnail: trackInfo.thumbnail,\n                    views: 0,\n                    author: trackInfo.author.name,\n                    requestedBy: context.requestedBy,\n                    source: 'arbitrary',\n                    engine: trackInfo.stream,\n                    queryType: context.type\n                });\n\n                track.extractor = this;\n\n                return { playlist: null, tracks: [track] };\n            }\n            default:\n                return this.emptyResponse();\n        }\n    }\n\n    public emptyResponse(): ExtractorInfo {\n        return { playlist: null, tracks: [] };\n    }\n\n    public async stream(info: Track) {\n        const engine = info.raw.engine as string;\n        if (engine) {\n            return engine;\n        }\n\n        const track = await Vimeo.getInfo(info.url).catch(Util.noop);\n        if (!track || !track.stream) throw new Error('Could not extract stream from this source');\n\n        info.raw.engine = {\n            streamURL: track.stream\n        };\n\n        return track.stream;\n    }\n}\n","import { Readable } from 'stream';\nimport http from 'http';\nimport https from 'https';\nimport { getFetch } from '../extractors/common/helper';\n\nclass Vimeo {\n    constructor() {\n        throw new Error(`The ${this.constructor.name} class may not be instantiated!`);\n    }\n\n    /**\n     * @typedef {Readable} Readable\n     */\n\n    /**\n     * Downloads from vimeo\n     * @param {number} id Vimeo video id\n     * @returns {Promise<Readable>}\n     */\n    static download(id: number | string): Promise<Readable> {\n        return new Promise(async (resolve) => {\n            const info = await Vimeo.getInfo(id);\n            if (!info) return null;\n\n            const downloader = info.stream.startsWith('https://') ? https : http;\n\n            downloader.get(info.stream, (res) => {\n                resolve(res);\n            });\n        });\n    }\n\n    /**\n     * Returns video info\n     * @param {number} id Video id\n     */\n    static async getInfo(id: number | string): Promise<VimeoInfo | null> {\n        if (!id) throw new Error('Invalid id');\n        const url = `https://player.vimeo.com/video/${id}`;\n\n        try {\n            const res = await getFetch(url);\n            const data = await res.text();\n            const json = JSON.parse(data.split('window.playerConfig =')[1].split(';')[0].trim());\n\n            const obj = {\n                id: json.video.id,\n                duration: json.video.duration * 1000,\n                title: json.video.title,\n                url: json.video.url,\n                thumbnail: json.video.thumbs['1280'] || json.video.thumbs.base,\n                stream: json.request.files.progressive[0].url,\n                author: {\n                    id: json.video.owner.id,\n                    name: json.video.owner.name,\n                    url: json.video.owner.url,\n                    avatar: json.video.owner.img_2x || json.video.owner.img\n                }\n            };\n\n            return obj;\n        } catch {\n            return null;\n        }\n    }\n}\n\nexport interface VimeoInfo {\n    id: number;\n    duration: number;\n    title: string;\n    url: string;\n    thumbnail: string;\n    stream: string;\n    author: {\n        id: number;\n        name: string;\n        url: string;\n        avatar: string;\n    };\n}\n\nexport { Vimeo };\n","// prettier-ignore\nimport {\n    BaseExtractor,\n    ExtractorInfo,\n    ExtractorSearchContext,\n    QueryType,\n    SearchQueryType,\n    Track,\n    Util\n} from 'discord-player';\nimport reverbnation from 'reverbnation-scraper';\n\nexport class ReverbnationExtractor extends BaseExtractor {\n    public static identifier = 'com.discord-player.reverbnationextractor' as const;\n\n    public async validate(query: string, type?: SearchQueryType | null | undefined): Promise<boolean> {\n        if (typeof query !== 'string') return false;\n        return ([QueryType.REVERBNATION] as SearchQueryType[]).some((r) => r === type);\n    }\n\n    public async getRelatedTracks(track: Track) {\n        void track;\n        return this.createResponse();\n    }\n\n    public async handle(query: string, context: ExtractorSearchContext): Promise<ExtractorInfo> {\n        switch (context.type) {\n            case QueryType.REVERBNATION: {\n                const trackInfo = await reverbnation.getInfo(query).catch(Util.noop);\n\n                if (!trackInfo) return this.emptyResponse();\n\n                const track = new Track(this.context.player, {\n                    title: trackInfo.title,\n                    url: trackInfo.url,\n                    duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration)),\n                    description: trackInfo.lyrics || `${trackInfo.title} by ${trackInfo.artist.name}`,\n                    thumbnail: trackInfo.thumbnail,\n                    views: 0,\n                    author: trackInfo.artist.name,\n                    requestedBy: context.requestedBy,\n                    source: 'arbitrary',\n                    engine: trackInfo.streamURL,\n                    queryType: context.type\n                });\n\n                track.extractor = this;\n\n                return { playlist: null, tracks: [track] };\n            }\n            default:\n                return this.emptyResponse();\n        }\n    }\n\n    public emptyResponse(): ExtractorInfo {\n        return { playlist: null, tracks: [] };\n    }\n\n    public async stream(info: Track) {\n        const engine = info.raw.engine as string;\n        if (engine) {\n            return engine;\n        }\n\n        const track = await reverbnation.getInfo(info.url).catch(Util.noop);\n        if (!track || !track.streamURL) throw new Error('Could not extract stream from this source');\n\n        info.raw.engine = {\n            streamURL: track.streamURL\n        };\n\n        return track.streamURL;\n    }\n}\n","// prettier-ignore\nimport {\n    BaseExtractor,\n    ExtractorInfo,\n    ExtractorSearchContext,\n    QueryType,\n    SearchQueryType,\n    Track,\n    Util\n} from 'discord-player';\nimport type { IncomingMessage } from 'http';\nimport { createReadStream, existsSync } from 'fs';\nimport { downloadStream } from '../internal/downloader';\nimport { fromFile } from 'file-type';\nimport path from 'path';\nimport { stat } from 'fs/promises';\n\nexport class AttachmentExtractor extends BaseExtractor {\n    public static identifier = 'com.discord-player.attachmentextractor' as const;\n\n    public async validate(query: string, type?: SearchQueryType | null | undefined): Promise<boolean> {\n        if (typeof query !== 'string') return false;\n        return ([QueryType.ARBITRARY, QueryType.FILE] as SearchQueryType[]).some((r) => r === type);\n    }\n\n    public async getRelatedTracks(track: Track) {\n        void track;\n        return this.createResponse();\n    }\n\n    public async handle(query: string, context: ExtractorSearchContext): Promise<ExtractorInfo> {\n        switch (context.type) {\n            case QueryType.ARBITRARY: {\n                const data = (await downloadStream(query, context.requestOptions)) as IncomingMessage;\n                if (!['audio/', 'video/'].some((r) => !!data.headers['content-type']?.startsWith(r))) return this.emptyResponse();\n                const trackInfo = {\n                    title: (\n                        query\n                            .split('/')\n                            .filter((x) => x.length)\n                            .pop() ?? 'Attachment'\n                    )\n                        .split('?')[0]\n                        .trim(),\n                    duration: 0,\n                    thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png',\n                    engine: query,\n                    // eslint-disable-next-line\n                    author: ((data as any).client?.servername as string) || 'Attachment',\n                    // eslint-disable-next-line\n                    description: ((data as any).client?.servername as string) || 'Attachment',\n                    url: data.url || query\n                };\n\n                const track = new Track(this.context.player, {\n                    title: trackInfo.title,\n                    url: trackInfo.url,\n                    duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration)),\n                    description: trackInfo.description,\n                    thumbnail: trackInfo.thumbnail,\n                    views: 0,\n                    author: trackInfo.author,\n                    requestedBy: context.requestedBy,\n                    source: 'arbitrary',\n                    engine: trackInfo.url,\n                    queryType: context.type\n                });\n\n                track.extractor = this;\n\n                // @ts-expect-error\n                track.raw.isFile = false;\n\n                return { playlist: null, tracks: [track] };\n            }\n            case QueryType.FILE: {\n                if (!existsSync(query)) return this.emptyResponse();\n                const fstat = await stat(query);\n                if (!fstat.isFile()) return this.emptyResponse();\n                const mime = await fromFile(query).catch(() => null);\n                if (!mime || !['audio/', 'video/'].some((r) => !!mime.mime.startsWith(r))) return this.emptyResponse();\n                const trackInfo = {\n                    title: path.basename(query) || 'Attachment',\n                    duration: 0,\n                    thumbnail: 'https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png',\n                    engine: query,\n                    author: 'Attachment',\n                    description: 'Attachment',\n                    url: query\n                };\n\n                const track = new Track(this.context.player, {\n                    title: trackInfo.title,\n                    url: trackInfo.url,\n                    duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration)),\n                    description: trackInfo.description,\n                    thumbnail: trackInfo.thumbnail,\n                    views: 0,\n                    author: trackInfo.author,\n                    requestedBy: context.requestedBy,\n                    source: 'arbitrary',\n                    engine: trackInfo.url,\n                    queryType: context.type\n                });\n\n                track.extractor = this;\n\n                // @ts-expect-error\n                track.raw.isFile = true;\n\n                return { playlist: null, tracks: [track] };\n            }\n            default:\n                return this.emptyResponse();\n        }\n    }\n\n    public emptyResponse(): ExtractorInfo {\n        return { playlist: null, tracks: [] };\n    }\n\n    public async stream(info: Track) {\n        const engine = info.raw.engine as string;\n        // @ts-expect-error\n        const isFile = info.raw.isFile as boolean;\n\n        if (!engine) throw new Error('Could not find stream source');\n\n        if (!isFile) {\n            return engine;\n            // return await downloadStream(engine);\n        }\n\n        return createReadStream(engine);\n    }\n}\n","import http, { RequestOptions } from 'http';\nimport https from 'https';\nimport { Readable } from 'stream';\n\nexport function downloadStream(url: string, opts: RequestOptions = {}) {\n    return new Promise<Readable>((resolve, reject) => {\n        const lib = url.startsWith('http://') ? http : https;\n\n        lib.get(url, opts, (res) => resolve(res)).once('error', reject);\n    });\n}\n","import { BaseExtractor, ExtractorInfo, ExtractorSearchContext, Playlist, QueryType, SearchQueryType, Track, Util } from 'discord-player';\nimport { AppleMusic } from '../internal';\nimport { Readable } from 'stream';\nimport { YoutubeExtractor } from './YoutubeExtractor';\nimport { StreamFN, loadYtdl, makeYTSearch } from './common/helper';\n\nexport class AppleMusicExtractor extends BaseExtractor {\n    public static identifier = 'com.discord-player.applemusicextractor' as const;\n    private _stream!: StreamFN;\n\n    public async activate(): Promise<void> {\n        const lib = await loadYtdl(this.context.player.options.ytdlOptions);\n        this._stream = lib.stream;\n    }\n\n    public async validate(query: string, type?: SearchQueryType | null | undefined): Promise<boolean> {\n        // prettier-ignore\n        return (<SearchQueryType[]>[\n            QueryType.APPLE_MUSIC_ALBUM,\n            QueryType.APPLE_MUSIC_PLAYLIST,\n            QueryType.APPLE_MUSIC_SONG,\n            QueryType.APPLE_MUSIC_SEARCH,\n            QueryType.AUTO,\n            QueryType.AUTO_SEARCH\n        ]).some((t) => t === type);\n    }\n\n    public async getRelatedTracks(track: Track) {\n        if (track.queryType === QueryType.APPLE_MUSIC_SONG)\n            return this.handle(track.author || track.title, {\n                type: QueryType.APPLE_MUSIC_SEARCH,\n                requestedBy: track.requestedBy\n            });\n\n        return this.createResponse();\n    }\n\n    public async handle(query: string, context: ExtractorSearchContext): Promise<ExtractorInfo> {\n        switch (context.type) {\n            case QueryType.AUTO:\n            case QueryType.AUTO_SEARCH:\n            case QueryType.APPLE_MUSIC_SEARCH: {\n                const data = await AppleMusic.search(query);\n                if (!data || !data.length) return this.createResponse();\n                const tracks = data.map(\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    (m: any) => {\n                        const track = new Track(this.context.player, {\n                            author: m.artist.name,\n                            description: m.title,\n                            duration: typeof m.duration === 'number' ? Util.buildTimeCode(Util.parseMS(m.duration)) : m.duration,\n                            thumbnail: m.thumbnail,\n                            title: m.title,\n                            url: m.url,\n                            views: 0,\n                            source: 'apple_music',\n                            requestedBy: context.requestedBy,\n                            queryType: 'appleMusicSong'\n                        });\n\n                        track.extractor = this;\n\n                        return track;\n                    }\n                );\n\n                return this.createResponse(null, tracks);\n            }\n            case QueryType.APPLE_MUSIC_ALBUM: {\n                const info = await AppleMusic.getAlbumInfo(query);\n                if (!info) return this.createResponse();\n\n                const playlist = new Playlist(this.context.player, {\n                    author: {\n                        name: info.artist.name,\n                        url: ''\n                    },\n                    description: info.title,\n                    id: info.id,\n                    source: 'apple_music',\n                    thumbnail: info.thumbnail,\n                    title: info.title,\n                    tracks: [],\n                    type: 'album',\n                    url: info.url,\n                    rawPlaylist: info\n                });\n\n                playlist.tracks = info.tracks.map(\n                    (\n                        m: any // eslint-disable-line\n                    ) => {\n                        const track = new Track(this.context.player, {\n                            author: m.artist.name,\n                            description: m.title,\n                            duration: typeof m.duration === 'number' ? Util.buildTimeCode(Util.parseMS(m.duration)) : m.duration,\n                            thumbnail: m.thumbnail,\n                            title: m.title,\n                            url: m.url,\n                            views: 0,\n                            source: 'apple_music',\n                            requestedBy: context.requestedBy,\n                            queryType: 'appleMusicSong'\n                        });\n                        track.extractor = this;\n                        return track;\n                    }\n                );\n\n                return { playlist, tracks: playlist.tracks };\n            }\n            case QueryType.APPLE_MUSIC_PLAYLIST: {\n                const info = await AppleMusic.getPlaylistInfo(query);\n                if (!info) return this.createResponse();\n\n                const playlist = new Playlist(this.context.player, {\n                    author: {\n                        name: info.artist.name,\n                        url: ''\n                    },\n                    description: info.title,\n                    id: info.id,\n                    source: 'apple_music',\n                    thumbnail: info.thumbnail,\n                    title: info.title,\n                    tracks: [],\n                    type: 'playlist',\n                    url: info.url,\n                    rawPlaylist: info\n                });\n\n                playlist.tracks = info.tracks.map(\n                    (\n                        m: any // eslint-disable-line\n                    ) => {\n                        const track = new Track(this.context.player, {\n                            author: m.artist.name,\n                            description: m.title,\n                            duration: typeof m.duration === 'number' ? Util.buildTimeCode(Util.parseMS(m.duration)) : m.duration,\n                            thumbnail: m.thumbnail,\n                            title: m.title,\n                            url: m.url,\n                            views: 0,\n                            source: 'apple_music',\n                            requestedBy: context.requestedBy,\n                            queryType: 'appleMusicSong'\n                        });\n\n                        track.extractor = this;\n\n                        return track;\n                    }\n                );\n\n                return { playlist, tracks: playlist.tracks };\n            }\n            case QueryType.APPLE_MUSIC_SONG: {\n                const info = await AppleMusic.getSongInfo(query);\n                if (!info) return this.createResponse();\n\n                const track = new Track(this.context.player, {\n                    author: info.artist.name,\n                    description: info.title,\n                    duration: typeof info.duration === 'number' ? Util.buildTimeCode(Util.parseMS(info.duration)) : info.duration,\n                    thumbnail: info.thumbnail,\n                    title: info.title,\n                    url: info.url,\n                    views: 0,\n                    source: 'apple_music',\n                    requestedBy: context.requestedBy,\n                    queryType: context.type\n                });\n\n                track.extractor = this;\n\n                return { playlist: null, tracks: [track] };\n            }\n            default:\n                return { playlist: null, tracks: [] };\n        }\n    }\n\n    public async stream(info: Track): Promise<string | Readable> {\n        if (!this._stream) {\n            throw new Error(`Could not find youtube streaming library.`);\n        }\n\n        let url = info.url;\n\n        if (YoutubeExtractor.validateURL(info.raw.url)) url = info.raw.url;\n        else {\n            const _url = await makeYTSearch(`${info.title} ${info.author}`, 'video')\n                .then((r) => r[0].url)\n                .catch(Util.noop);\n            if (!_url) throw new Error(`Could not extract stream for this track`);\n            info.raw.url = url = _url;\n        }\n\n        return this._stream(url);\n    }\n}\n","export * from './AppleMusic';\nexport * from './Vimeo';\nexport * from './downloader';\nexport * from './Spotify';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { QueryResolver } from 'discord-player';\nimport { parse, HTMLElement } from 'node-html-parser';\nimport { UA, getFetch } from '../extractors/common/helper';\n\nfunction getHTML(link: string): Promise<HTMLElement | null> {\n    return getFetch(link, {\n        headers: {\n            'User-Agent': UA\n        }\n    })\n        .then((r) => r.text())\n        .then(\n            (txt) => parse(txt),\n            () => null\n        );\n}\n\nfunction makeImage({ height, url, width, ext = 'jpg' }: { url: string; width: number; height: number; ext?: string }) {\n    return url.replace('{w}', `${width}`).replace('{h}', `${height}`).replace('{f}', ext);\n}\n\nfunction parseDuration(d: string) {\n    const r = (name: string, unit: string) => `((?<${name}>-?\\\\d*[\\\\.,]?\\\\d+)${unit})?`;\n    const regex = new RegExp(\n        [\n            '(?<negative>-)?P',\n            r('years', 'Y'),\n            r('months', 'M'),\n            r('weeks', 'W'),\n            r('days', 'D'),\n            '(T',\n            r('hours', 'H'),\n            r('minutes', 'M'),\n            r('seconds', 'S'),\n            ')?' // end optional time\n        ].join('')\n    );\n    const test = regex.exec(d);\n    if (!test || !test.groups) return '0:00';\n\n    const dur = [test.groups.years, test.groups.months, test.groups.weeks, test.groups.days, test.groups.hours, test.groups.minutes, test.groups.seconds];\n\n    return (\n        dur\n            .filter((r, i, a) => !!r || i > a.length - 2)\n            .map((m, i) => {\n                if (!m) m = '0';\n                return i < 1 ? m : m.padStart(2, '0');\n            })\n            .join(':') || '0:00'\n    );\n}\n\nexport class AppleMusic {\n    public constructor() {\n        return AppleMusic;\n    }\n\n    public static async search(query: string) {\n        try {\n            const url = `https://music.apple.com/us/search?term=${encodeURIComponent(query)}`;\n            const node = await getHTML(url);\n            if (!node) return [];\n\n            const rawData = node.getElementById('serialized-server-data');\n            if (!rawData) return [];\n\n            const data = JSON.parse(rawData.innerText)[0].data.sections;\n            const tracks = data.find((s: any) => s.itemKind === 'trackLockup')?.items;\n            if (!tracks) return [];\n\n            return tracks.map((track: any) => ({\n                id: track.contentDescriptor.identifiers.storeAdamID,\n                duration: track.duration || '0:00',\n                title: track.title,\n                url: track.contentDescriptor.url,\n                thumbnail: track?.artwork?.dictionary\n                    ? makeImage({\n                          url: track.artwork.dictionary.url,\n                          height: track.artwork.dictionary.height,\n                          width: track.artwork.dictionary.width\n                      })\n                    : 'https://music.apple.com/assets/favicon/favicon-180.png',\n                artist: {\n                    name: track.subtitleLinks?.[0]?.title ?? 'Unknown Artist'\n                }\n            }));\n        } catch {\n            return [];\n        }\n    }\n\n    public static async getSongInfoFallback(res: HTMLElement, name: string, id: string, link: string) {\n        try {\n            const metaTags = res.getElementsByTagName('meta');\n            if (!metaTags.length) return null;\n\n            const title = metaTags.find((r) => r.getAttribute('name') === 'apple:title')?.getAttribute('content') || res.querySelector('title')?.innerText || name;\n            const contentId = metaTags.find((r) => r.getAttribute('name') === 'apple:content_id')?.getAttribute('content') || id;\n            const durationRaw = metaTags.find((r) => r.getAttribute('property') === 'music:song:duration')?.getAttribute('content');\n\n            const song = {\n                id: contentId,\n                duration: durationRaw\n                    ? parseDuration(durationRaw)\n                    : metaTags\n                          .find((m) => m.getAttribute('name') === 'apple:description')\n                          ?.textContent.split('Duration: ')?.[1]\n                          .split('\"')?.[0] || '0:00',\n                title,\n                url: link,\n                thumbnail:\n                    metaTags.find((r) => ['og:image:secure_url', 'og:image'].includes(r.getAttribute('property')!))?.getAttribute('content') ||\n                    'https://music.apple.com/assets/favicon/favicon-180.png',\n                artist: {\n                    name: res.querySelector('.song-subtitles__artists>a')?.textContent?.trim() || 'Apple Music'\n                }\n            };\n\n            return song;\n        } catch {\n            return null;\n        }\n    }\n\n    public static async getSongInfo(link: string) {\n        if (!QueryResolver.regex.appleMusicSongRegex.test(link)) {\n            return null;\n        }\n\n        const url = new URL(link);\n        const id = url.searchParams.get('i');\n        const name = url.pathname.split('album/')[1]?.split('/')[0];\n\n        if (!id || !name) return null;\n\n        const res = await getHTML(`https://music.apple.com/us/song/${name}/${id}`);\n        if (!res) return null;\n\n        try {\n            const datasrc =\n                res.getElementById('serialized-server-data')?.innerText || res.innerText.split('<script type=\"application/json\" id=\"serialized-server-data\">')?.[1]?.split('</script>')?.[0];\n            if (!datasrc) throw 'not found';\n            const data = JSON.parse(datasrc)[0].data.seoData;\n            const song = data.ogSongs[0]?.attributes;\n\n            return {\n                id: data.ogSongs[0]?.id || data.appleContentId || id,\n                duration: song?.durationInMillis || '0:00',\n                title: song?.name || data.appleTitle,\n                url: song?.url || data.url || link,\n                thumbnail: song?.artwork\n                    ? makeImage({\n                          url: song.artwork.url,\n                          height: song.artwork.height,\n                          width: song.artwork.width\n                      })\n                    : data.artworkUrl\n                    ? makeImage({\n                          height: data.height,\n                          width: data.width,\n                          url: data.artworkUrl,\n                          ext: data.fileType || 'jpg'\n                      })\n                    : 'https://music.apple.com/assets/favicon/favicon-180.png',\n                artist: {\n                    name: song?.artistName || data.socialTitle || 'Apple Music'\n                }\n            };\n        } catch {\n            return this.getSongInfoFallback(res, name, id, link);\n        }\n    }\n\n    public static async getPlaylistInfo(link: string) {\n        if (!QueryResolver.regex.appleMusicPlaylistRegex.test(link)) {\n            return null;\n        }\n\n        const res = await getHTML(link);\n        if (!res) return null;\n\n        try {\n            const datasrc =\n                res.getElementById('serialized-server-data')?.innerText || res.innerText.split('<script type=\"application/json\" id=\"serialized-server-data\">')?.[1]?.split('</script>')?.[0];\n            if (!datasrc) throw 'not found';\n            const pl = JSON.parse(datasrc)[0].data.seoData;\n            const thumbnail = pl.artworkUrl\n                ? makeImage({\n                      height: pl.height,\n                      width: pl.width,\n                      url: pl.artworkUrl,\n                      ext: pl.fileType || 'jpg'\n                  })\n                : 'https://music.apple.com/assets/favicon/favicon-180.png';\n            return {\n                id: pl.appleContentId,\n                title: pl.appleTitle,\n                thumbnail,\n                artist: {\n                    name: pl.ogSongs?.[0]?.attributes?.artistName || 'Apple Music'\n                },\n                url: pl.url,\n                tracks:\n                    // eslint-disable-next-line\n                    pl.ogSongs?.map((m: any) => {\n                        const song = m.attributes;\n                        return {\n                            id: m.id,\n                            duration: song.durationInMillis || '0:00',\n                            title: song.name,\n                            url: song.url,\n                            thumbnail: song.artwork\n                                ? makeImage({\n                                      url: song.artwork.url,\n                                      height: song.artwork.height,\n                                      width: song.artwork.width\n                                  })\n                                : thumbnail,\n                            artist: {\n                                name: song.artistName || 'Apple Music'\n                            }\n                        };\n                    }) || []\n            };\n        } catch {\n            return null;\n        }\n    }\n\n    public static async getAlbumInfo(link: string) {\n        if (!QueryResolver.regex.appleMusicAlbumRegex.test(link)) {\n            return null;\n        }\n\n        const res = await getHTML(link);\n        if (!res) return null;\n\n        try {\n            const datasrc =\n                res.getElementById('serialized-server-data')?.innerText || res.innerText.split('<script type=\"application/json\" id=\"serialized-server-data\">')?.[1]?.split('</script>')?.[0];\n            if (!datasrc) throw 'not found';\n            const pl = JSON.parse(datasrc)[0].data.seoData;\n            const thumbnail = pl.artworkUrl\n                ? makeImage({\n                      height: pl.height,\n                      width: pl.width,\n                      url: pl.artworkUrl,\n                      ext: pl.fileType || 'jpg'\n                  })\n                : 'https://music.apple.com/assets/favicon/favicon-180.png';\n            return {\n                id: pl.appleContentId,\n                title: pl.appleTitle,\n                thumbnail,\n                artist: {\n                    name: pl.ogSongs?.[0]?.attributes?.artistName || 'Apple Music'\n                },\n                url: pl.url,\n                tracks:\n                    // eslint-disable-next-line\n                    pl.ogSongs?.map((m: any) => {\n                        const song = m.attributes;\n                        return {\n                            id: m.id,\n                            duration: song.durationInMillis || '0:00',\n                            title: song.name,\n                            url: song.url,\n                            thumbnail: song.artwork\n                                ? makeImage({\n                                      url: song.artwork.url,\n                                      height: song.artwork.height,\n                                      width: song.artwork.width\n                                  })\n                                : thumbnail,\n                            artist: {\n                                name: song.artistName || 'Apple Music'\n                            }\n                        };\n                    }) || []\n            };\n        } catch {\n            return null;\n        }\n    }\n}\n","import { UA, getFetch } from '../extractors';\n\nconst SP_ANON_TOKEN_URL = 'https://open.spotify.com/get_access_token?reason=transport&productType=embed';\nconst SP_ACCESS_TOKEN_URL = 'https://accounts.spotify.com/api/token?grant_type=client_credentials';\nconst SP_BASE = 'https://api.spotify.com/v1';\n\ninterface SP_ACCESS_TOKEN {\n    token: string;\n    expiresAfter: number;\n    type: 'Bearer';\n}\n\nexport class SpotifyAPI {\n    public accessToken: SP_ACCESS_TOKEN | null = null;\n\n    public constructor(\n        public credentials: { clientId: string | null; clientSecret: string | null } = {\n            clientId: null,\n            clientSecret: null\n        }\n    ) {}\n\n    public get authorizationKey() {\n        if (!this.credentials.clientId || !this.credentials.clientSecret) return null;\n        return Buffer.from(`${this.credentials.clientId}:${this.credentials.clientSecret}`).toString('base64');\n    }\n\n    public async requestToken() {\n        const key = this.authorizationKey;\n\n        if (!key) return await this.requestAnonymousToken();\n\n        try {\n            const res = await getFetch(SP_ACCESS_TOKEN_URL, {\n                method: 'POST',\n                headers: {\n                    'User-Agent': UA,\n                    Authorization: `Basic ${key}`,\n                    'Content-Type': 'application/json'\n                }\n            });\n\n            const body = await res.json();\n\n            if (!body.access_token) throw 'no token';\n\n            const data = {\n                token: body.access_token as string,\n                expiresAfter: body.expires_in as number,\n                type: 'Bearer' as const\n            };\n\n            return (this.accessToken = data);\n        } catch {\n            return await this.requestAnonymousToken();\n        }\n    }\n\n    public async requestAnonymousToken() {\n        try {\n            const res = await getFetch(SP_ANON_TOKEN_URL, {\n                headers: {\n                    'User-Agent': UA,\n                    'Content-Type': 'application/json'\n                }\n            });\n\n            if (!res.ok) throw 'not_ok';\n\n            const body = await res.json();\n\n            if (!body.accessToken) throw 'no_access_token';\n\n            const data = {\n                token: body.accessToken as string,\n                expiresAfter: body.accessTokenExpirationTimestampMs as number,\n                type: 'Bearer' as const\n            };\n\n            return (this.accessToken = data);\n        } catch {\n            return null;\n        }\n    }\n\n    public isTokenExpired() {\n        if (!this.accessToken) return true;\n        return Date.now() > this.accessToken.expiresAfter;\n    }\n\n    public async search(query: string) {\n        try {\n            // req\n            if (this.isTokenExpired()) await this.requestToken();\n            // failed\n            if (!this.accessToken) return null;\n\n            const res = await getFetch(`${SP_BASE}/search/?q=${encodeURIComponent(query)}&type=track&market=US`, {\n                headers: {\n                    'User-Agent': UA,\n                    Authorization: `${this.accessToken.type} ${this.accessToken.token}`,\n                    'Content-Type': 'application/json'\n                }\n            });\n\n            if (!res.ok) return null;\n\n            const data: { tracks: { items: SpotifyTrack[] } } = await res.json();\n\n            return data.tracks.items.map((m) => ({\n                title: m.name,\n                duration: m.duration_ms,\n                artist: m.artists.map((m) => m.name).join(', '),\n                url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,\n                thumbnail: m.album.images?.[0]?.url || null\n            }));\n        } catch {\n            return null;\n        }\n    }\n\n    public async getPlaylist(id: string) {\n        try {\n            // req\n            if (this.isTokenExpired()) await this.requestToken();\n            // failed\n            if (!this.accessToken) return null;\n\n            const res = await getFetch(`${SP_BASE}/playlists/${id}?market=US`, {\n                headers: {\n                    'User-Agent': UA,\n                    Authorization: `${this.accessToken.type} ${this.accessToken.token}`,\n                    'Content-Type': 'application/json'\n                }\n            });\n            if (!res.ok) return null;\n\n            const data: {\n                external_urls: { spotify: string };\n                owner: { display_name: string };\n                id: string;\n                name: string;\n                images: { url: string }[];\n                tracks: {\n                    items: { track: SpotifyTrack }[];\n                    next?: string;\n                };\n            } = await res.json();\n\n            if (!data.tracks.items.length) return null;\n\n            const t: { track: SpotifyTrack }[] = data.tracks.items;\n\n            let next: string | undefined = data.tracks.next;\n\n            while (typeof next === 'string') {\n                try {\n                    const res = await getFetch(next, {\n                        headers: {\n                            'User-Agent': UA,\n                            Authorization: `${this.accessToken.type} ${this.accessToken.token}`,\n                            'Content-Type': 'application/json'\n                        }\n                    });\n                    if (!res.ok) break;\n                    const nextPage: { items: { track: SpotifyTrack }[]; next?: string } = await res.json();\n\n                    t.push(...nextPage.items);\n                    next = nextPage.next;\n\n                    if (!next) break;\n                } catch {\n                    break;\n                }\n            }\n\n            const tracks = t.map(({ track: m }) => ({\n                title: m.name,\n                duration: m.duration_ms,\n                artist: m.artists.map((m) => m.name).join(', '),\n                url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,\n                thumbnail: m.album.images?.[0]?.url || null\n            }));\n\n            if (!tracks.length) return null;\n            return {\n                name: data.name,\n                author: data.owner.display_name,\n                thumbnail: data.images?.[0]?.url || null,\n                id: data.id,\n                url: data.external_urls.spotify || `https://open.spotify.com/playlist/${id}`,\n                tracks\n            };\n        } catch {\n            return null;\n        }\n    }\n\n    public async getAlbum(id: string) {\n        try {\n            // req\n            if (this.isTokenExpired()) await this.requestToken();\n            // failed\n            if (!this.accessToken) return null;\n\n            const res = await getFetch(`${SP_BASE}/albums/${id}?market=US`, {\n                headers: {\n                    'User-Agent': UA,\n                    Authorization: `${this.accessToken.type} ${this.accessToken.token}`,\n                    'Content-Type': 'application/json'\n                }\n            });\n            if (!res.ok) return null;\n\n            const data: {\n                external_urls: { spotify: string };\n                artists: { name: string }[];\n                id: string;\n                name: string;\n                images: { url: string }[];\n                tracks: {\n                    items: SpotifyTrack[];\n                    next?: string;\n                };\n            } = await res.json();\n\n            if (!data.tracks.items.length) return null;\n\n            const t: SpotifyTrack[] = data.tracks.items;\n\n            let next: string | undefined = data.tracks.next;\n\n            while (typeof next === 'string') {\n                try {\n                    const res = await getFetch(next, {\n                        headers: {\n                            'User-Agent': UA,\n                            Authorization: `${this.accessToken.type} ${this.accessToken.token}`,\n                            'Content-Type': 'application/json'\n                        }\n                    });\n                    if (!res.ok) break;\n                    const nextPage: { items: SpotifyTrack[]; next?: string } = await res.json();\n\n                    t.push(...nextPage.items);\n                    next = nextPage.next;\n\n                    if (!next) break;\n                } catch {\n                    break;\n                }\n            }\n\n            const tracks = t.map((m) => ({\n                title: m.name,\n                duration: m.duration_ms,\n                artist: m.artists.map((m) => m.name).join(', '),\n                url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,\n                thumbnail: data.images?.[0]?.url || null\n            }));\n\n            if (!tracks.length) return null;\n            return {\n                name: data.name,\n                author: data.artists.map((m) => m.name).join(', '),\n                thumbnail: data.images?.[0]?.url || null,\n                id: data.id,\n                url: data.external_urls.spotify || `https://open.spotify.com/album/${id}`,\n                tracks\n            };\n        } catch {\n            return null;\n        }\n    }\n}\n\nexport interface SpotifyTrack {\n    album: {\n        images: {\n            height: number;\n            url: string;\n            width: number;\n        }[];\n    };\n    artists: {\n        id: string;\n        name: string;\n    }[];\n    duration_ms: number;\n    explicit: boolean;\n    external_urls: { spotify: string };\n    id: string;\n    name: string;\n}\n","import { BaseExtractor, ExtractorInfo, ExtractorSearchContext, Playlist, QueryType, SearchQueryType, Track, Util } from 'discord-player';\nimport { Readable } from 'stream';\nimport { YoutubeExtractor } from './YoutubeExtractor';\nimport { StreamFN, getFetch, loadYtdl, makeYTSearch } from './common/helper';\nimport spotify, { Spotify, SpotifyAlbum, SpotifyPlaylist, SpotifySong } from 'spotify-url-info';\nimport { SpotifyAPI } from '../internal';\n\nconst re = /^(?:https:\\/\\/open\\.spotify\\.com\\/(?:user\\/[A-Za-z0-9]+\\/)?|spotify:)(album|playlist|track)(?:[/:])([A-Za-z0-9]+).*$/;\n\nexport class SpotifyExtractor extends BaseExtractor {\n    public static identifier = 'com.discord-player.spotifyextractor' as const;\n    private _stream!: StreamFN;\n    private _lib!: Spotify;\n    private _credentials = {\n        clientId: process.env.DP_SPOTIFY_CLIENT_ID || null,\n        clientSecret: process.env.DP_SPOTIFY_CLIENT_SECRET || null\n    };\n    public internal = new SpotifyAPI(this._credentials);\n\n    public async activate(): Promise<void> {\n        const lib = await loadYtdl(this.context.player.options.ytdlOptions);\n        this._stream = lib.stream;\n        this._lib = spotify(getFetch);\n        if (this.internal.isTokenExpired()) await this.internal.requestToken();\n    }\n\n    public async validate(query: string, type?: SearchQueryType | null | undefined): Promise<boolean> {\n        // prettier-ignore\n        return (<SearchQueryType[]>[\n            QueryType.SPOTIFY_ALBUM,\n            QueryType.SPOTIFY_PLAYLIST,\n            QueryType.SPOTIFY_SONG,\n            QueryType.SPOTIFY_SEARCH,\n            QueryType.AUTO,\n            QueryType.AUTO_SEARCH\n        ]).some((t) => t === type);\n    }\n\n    public async getRelatedTracks(track: Track) {\n        return await this.handle(track.author || track.title, {\n            type: QueryType.SPOTIFY_SEARCH\n        });\n    }\n\n    public async handle(query: string, context: ExtractorSearchContext): Promise<ExtractorInfo> {\n        switch (context.type) {\n            case QueryType.AUTO:\n            case QueryType.AUTO_SEARCH:\n            case QueryType.SPOTIFY_SEARCH: {\n                const data = await this.internal.search(query);\n                if (!data) return this.createResponse();\n\n                return this.createResponse(\n                    null,\n                    data.map((spotifyData) => {\n                        const track = new Track(this.context.player, {\n                            title: spotifyData.title,\n                            description: `${spotifyData.title} by ${spotifyData.artist}`,\n                            author: spotifyData.artist ?? 'Unknown Artist',\n                            url: spotifyData.url,\n                            thumbnail: spotifyData.thumbnail || 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                            duration: Util.buildTimeCode(Util.parseMS(spotifyData.duration ?? 0)),\n                            views: 0,\n                            requestedBy: context.requestedBy,\n                            source: 'spotify',\n                            queryType: QueryType.SPOTIFY_SONG\n                        });\n\n                        track.extractor = this;\n\n                        return track;\n                    })\n                );\n            }\n            case QueryType.SPOTIFY_SONG: {\n                const spotifyData: SpotifySong | void = await this._lib.getData(query, context.requestOptions as unknown as RequestInit).catch(Util.noop);\n                if (!spotifyData) return { playlist: null, tracks: [] };\n                const spotifyTrack = new Track(this.context.player, {\n                    title: spotifyData.title,\n                    description: `${spotifyData.name} by ${spotifyData.artists.map((m) => m.name).join(', ')}`,\n                    author: spotifyData.artists[0]?.name ?? 'Unknown Artist',\n                    url: spotifyData.id ? `https://open.spotify.com/track/${spotifyData.id}` : query,\n                    thumbnail: spotifyData.coverArt?.sources?.[0]?.url || 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                    duration: Util.buildTimeCode(Util.parseMS(spotifyData.duration ?? spotifyData.maxDuration ?? 0)),\n                    views: 0,\n                    requestedBy: context.requestedBy,\n                    source: 'spotify',\n                    queryType: context.type\n                });\n\n                spotifyTrack.extractor = this;\n\n                return { playlist: null, tracks: [spotifyTrack] };\n            }\n            case QueryType.SPOTIFY_PLAYLIST: {\n                try {\n                    const { queryType, id } = this.parse(query);\n                    if (queryType !== 'playlist') throw 'err';\n\n                    const spotifyPlaylist = await this.internal.getPlaylist(id);\n                    if (!spotifyPlaylist) throw 'err';\n\n                    const playlist = new Playlist(this.context.player, {\n                        title: spotifyPlaylist.name,\n                        description: spotifyPlaylist.name ?? '',\n                        thumbnail: spotifyPlaylist.thumbnail ?? 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                        type: 'playlist',\n                        source: 'spotify',\n                        author: {\n                            name: spotifyPlaylist.author ?? 'Unknown Artist',\n                            url: null as unknown as string\n                        },\n                        tracks: [],\n                        id: spotifyPlaylist.id,\n                        url: spotifyPlaylist.url || query,\n                        rawPlaylist: spotifyPlaylist\n                    });\n\n                    playlist.tracks = spotifyPlaylist.tracks.map((spotifyData) => {\n                        const data = new Track(this.context.player, {\n                            title: spotifyData.title,\n                            description: `${spotifyData.title} by ${spotifyData.artist}`,\n                            author: spotifyData.artist ?? 'Unknown Artist',\n                            url: spotifyData.url,\n                            thumbnail: spotifyData.thumbnail || 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                            duration: Util.buildTimeCode(Util.parseMS(spotifyData.duration ?? 0)),\n                            views: 0,\n                            requestedBy: context.requestedBy,\n                            source: 'spotify',\n                            queryType: QueryType.SPOTIFY_SONG\n                        });\n                        data.extractor = this;\n                        return data;\n                    }) as Track[];\n\n                    return { playlist, tracks: playlist.tracks };\n                } catch {\n                    const spotifyPlaylist: SpotifyPlaylist | void = await this._lib.getData(query, context.requestOptions as unknown as RequestInit).catch(Util.noop);\n                    if (!spotifyPlaylist) return { playlist: null, tracks: [] };\n\n                    const playlist = new Playlist(this.context.player, {\n                        title: spotifyPlaylist.name ?? spotifyPlaylist.title,\n                        description: spotifyPlaylist.title ?? '',\n                        thumbnail: spotifyPlaylist.coverArt?.sources?.[0]?.url ?? 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                        type: spotifyPlaylist.type,\n                        source: 'spotify',\n                        author: {\n                            name: spotifyPlaylist.subtitle ?? 'Unknown Artist',\n                            url: null as unknown as string\n                        },\n                        tracks: [],\n                        id: spotifyPlaylist.id,\n                        url: spotifyPlaylist.id ? `https://open.spotify.com/playlist/${spotifyPlaylist.id}` : query,\n                        rawPlaylist: spotifyPlaylist\n                    });\n\n                    playlist.tracks = spotifyPlaylist.trackList.map((m) => {\n                        const data = new Track(this.context.player, {\n                            title: m.title ?? '',\n                            description: m.title ?? '',\n                            author: m.subtitle ?? 'Unknown Artist',\n                            url: m.uid ? `https://open.spotify.com/tracks/${m.uid}` : query,\n                            thumbnail: 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                            duration: Util.buildTimeCode(Util.parseMS(m.duration)),\n                            views: 0,\n                            requestedBy: context.requestedBy,\n                            playlist,\n                            source: 'spotify',\n                            queryType: 'spotifySong'\n                        });\n                        data.extractor = this;\n                        return data;\n                    }) as Track[];\n\n                    return { playlist, tracks: playlist.tracks };\n                }\n            }\n            case QueryType.SPOTIFY_ALBUM: {\n                try {\n                    const { queryType, id } = this.parse(query);\n                    if (queryType !== 'album') throw 'err';\n\n                    const spotifyAlbum = await this.internal.getAlbum(id);\n                    if (!spotifyAlbum) throw 'err';\n\n                    const playlist = new Playlist(this.context.player, {\n                        title: spotifyAlbum.name,\n                        description: spotifyAlbum.name ?? '',\n                        thumbnail: spotifyAlbum.thumbnail ?? 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                        type: 'album',\n                        source: 'spotify',\n                        author: {\n                            name: spotifyAlbum.author ?? 'Unknown Artist',\n                            url: null as unknown as string\n                        },\n                        tracks: [],\n                        id: spotifyAlbum.id,\n                        url: spotifyAlbum.url || query,\n                        rawPlaylist: spotifyAlbum\n                    });\n\n                    playlist.tracks = spotifyAlbum.tracks.map((spotifyData) => {\n                        const data = new Track(this.context.player, {\n                            title: spotifyData.title,\n                            description: `${spotifyData.title} by ${spotifyData.artist}`,\n                            author: spotifyData.artist ?? 'Unknown Artist',\n                            url: spotifyData.url,\n                            thumbnail: spotifyData.thumbnail || 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                            duration: Util.buildTimeCode(Util.parseMS(spotifyData.duration ?? 0)),\n                            views: 0,\n                            requestedBy: context.requestedBy,\n                            source: 'spotify',\n                            queryType: QueryType.SPOTIFY_SONG\n                        });\n                        data.extractor = this;\n                        return data;\n                    }) as Track[];\n\n                    return { playlist, tracks: playlist.tracks };\n                } catch {\n                    const album: SpotifyAlbum | void = await this._lib.getData(query, context.requestOptions as unknown as RequestInit).catch(Util.noop);\n                    if (!album) return { playlist: null, tracks: [] };\n\n                    const playlist = new Playlist(this.context.player, {\n                        title: album.name ?? album.title,\n                        description: album.title ?? '',\n                        thumbnail: album.coverArt?.sources?.[0]?.url ?? 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                        type: album.type,\n                        source: 'spotify',\n                        author: {\n                            name: album.subtitle ?? 'Unknown Artist',\n                            url: null as unknown as string\n                        },\n                        tracks: [],\n                        id: album.id,\n                        url: album.id ? `https://open.spotify.com/playlist/${album.id}` : query,\n                        rawPlaylist: album\n                    });\n\n                    playlist.tracks = album.trackList.map((m) => {\n                        const data = new Track(this.context.player, {\n                            title: m.title ?? '',\n                            description: m.title ?? '',\n                            author: m.subtitle ?? 'Unknown Artist',\n                            url: m.uid ? `https://open.spotify.com/tracks/${m.uid}` : query,\n                            thumbnail: 'https://www.scdn.co/i/_global/twitter_card-default.jpg',\n                            duration: Util.buildTimeCode(Util.parseMS(m.duration)),\n                            views: 0,\n                            requestedBy: context.requestedBy,\n                            playlist,\n                            source: 'spotify',\n                            queryType: 'spotifySong'\n                        });\n                        data.extractor = this;\n                        return data;\n                    }) as Track[];\n\n                    return { playlist, tracks: playlist.tracks };\n                }\n            }\n            default:\n                return { playlist: null, tracks: [] };\n        }\n    }\n\n    public async stream(info: Track): Promise<string | Readable> {\n        if (!this._stream) {\n            throw new Error(`Could not find youtube streaming library.`);\n        }\n\n        let url = info.url;\n\n        if (YoutubeExtractor.validateURL(info.raw.url)) url = info.raw.url;\n        else {\n            const _url = await makeYTSearch(`${info.title} ${info.author}`, 'video')\n                .then((r) => r[0].url)\n                .catch(Util.noop);\n            if (!_url) throw new Error(`Could not extract stream for this track`);\n            info.raw.url = url = _url;\n        }\n\n        return this._stream(url);\n    }\n\n    public parse(q: string) {\n        const [, queryType, id] = re.exec(q) || [];\n\n        return { queryType, id };\n    }\n}\n"],"mappings":"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","names":["import_youtube_sr","import_discord_player","lib","re","GeniusClient","import_discord_player","https","http","import_discord_player","reverbnation","import_discord_player","import_http","import_https","http","https","path","import_discord_player","import_discord_player","r","m","res","import_discord_player","spotify"]}